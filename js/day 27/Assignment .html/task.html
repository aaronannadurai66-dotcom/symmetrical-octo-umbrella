<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fetch API + LocalStorage</title>
</head>
<body>

<h2>User Data</h2>
<button onclick="loadData()">Fetch User</button>

<p id="result"></p>

<script>
    function loadData() {
        fetch("https://jsonplaceholder.typicode.com/users/1")
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(data => {
                // Display data using DOM
                document.getElementById("result").innerHTML =
                    "Name: " + data.name + "<br>" +
                    "Email: " + data.email;

                // Convert object to JSON string
                const jsonData = JSON.stringify(data.name);

                // Save one value to localStorage
                localStorage.setItem("username", jsonData);
            })
            .catch(error => {
                document.getElementById("result").textContent =
                    "Error fetching data!";
                console.log(error);
            });
    }

    // Retrieve saved value on page load
    const savedData = localStorage.getItem("username");
    if (savedData) {
        const name = JSON.parse(savedData);
        console.log("Saved Name:", name);
    }
</script>

</body>
</html>
